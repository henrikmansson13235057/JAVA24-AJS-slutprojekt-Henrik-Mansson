(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var l=a(1),r=a.n(l),n=a(13),s=a.n(n),m=a(5);var c=e=>{let{onAddAssignment:t}=e;const[a,n]=Object(l.useState)(""),[s,m]=Object(l.useState)("ux");return r.a.createElement("form",{onSubmit:e=>{e.preventDefault(),""!==a.trim()&&(t(a,s),n(""))},className:"p-4 border rounded"},r.a.createElement("h2",{className:"text-xl font-semibold mb-2"},"L\xe4gg till uppgift"),r.a.createElement("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Uppgiftstitel",className:"border p-2 w-full mb-2"}),r.a.createElement("select",{value:s,onChange:e=>m(e.target.value),className:"border p-2 w-full mb-2"},r.a.createElement("option",{value:"ux"},"UX"),r.a.createElement("option",{value:"frontend"},"Frontend"),r.a.createElement("option",{value:"backend"},"Backend")),r.a.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded"},"L\xe4gg till"))},o=a(3),i=a(15),d=a(10);const u=Object(i.a)({apiKey:"AIzaSyBGNd0ZOBKETzJAttnxrRa1OeDV4Zqb0jo",authDomain:"scrumboard-f2e02.firebaseapp.com",projectId:"scrumboard-f2e02",storageBucket:"scrumboard-f2e02.firebasestorage.app",messagingSenderId:"48014949573",appId:"1:48014949573:web:d85977114783f4138184ac",measurementId:"G-1EYFVNR3N6"}),b=Object(d.b)(u),g=Object(o.g)(u),p=async(e,t)=>{const a=Object(o.d)(g,"assignments",e);await Object(o.m)(a,{member:t,status:"in progress"})};var E=e=>{let{assignments:t,filters:a,sortBy:l,members:n,user:s}=e;const m=t.filter(e=>(!a.category||e.category===a.category)&&(!a.member||e.member===a.member)).sort((e,t)=>{var a,r,n,s;return"timestamp-asc"===l?((null===(a=e.timestamp)||void 0===a?void 0:a.seconds)||0)-((null===(r=t.timestamp)||void 0===r?void 0:r.seconds)||0):"timestamp-desc"===l?((null===(n=t.timestamp)||void 0===n?void 0:n.seconds)||0)-((null===(s=e.timestamp)||void 0===s?void 0:s.seconds)||0):"title-asc"===l?e.title.localeCompare(t.title):"title-desc"===l?t.title.localeCompare(e.title):0}),c=async e=>{const a=t.find(t=>t.id===e);if(a)if(a.member===s.name)try{await(async e=>{const t=Object(o.d)(g,"assignments",e);await Object(o.m)(t,{status:"finished"})})(e)}catch(l){alert("N\xe5got gick fel vid markering som klar."),console.error(l)}else alert("Du kan bara markera dina egna uppgifter som klara.")};return r.a.createElement("div",{className:"mt-4"},0===m.length?r.a.createElement("p",{className:"text-gray-500"},"Inga uppgifter"):r.a.createElement("ul",{className:"space-y-2"},m.map(e=>{var t;return r.a.createElement("li",{key:e.id,className:"p-3 border rounded flex justify-between items-center"},r.a.createElement("div",null,r.a.createElement("p",{className:"font-medium"},e.title),r.a.createElement("p",{className:"text-sm text-gray-600"},null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleString()," \u2013 ",e.category),e.member&&r.a.createElement("p",{className:"text-sm"},"Tilldelad: ",e.member)),r.a.createElement("div",{className:"space-x-2 flex items-center"},"new"===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{onChange:t=>p(e.id,t.target.value),className:"border p-1",defaultValue:""},r.a.createElement("option",{value:""},"Tilldela..."),n.filter(t=>t.category===e.category).map(e=>r.a.createElement("option",{key:e.id,value:e.name},e.name))),s&&(!e.member||""===e.member)&&s.role===e.category&&r.a.createElement("button",{onClick:()=>p(e.id,s.name),className:"bg-blue-500 text-white px-2 py-1 rounded ml-2"},"Ta emot")),"in progress"===e.status&&e.member===s.name&&r.a.createElement("button",{onClick:()=>c(e.id),className:"bg-green-500 text-white px-2 py-1 rounded"},"Klart"),"finished"===e.status&&r.a.createElement("button",{onClick:()=>(async e=>{const t=Object(o.d)(g,"assignments",e);await Object(o.c)(t)})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded"},"Radera")))})))};var v=e=>{let{filters:t,setFilters:a,sortBy:l,setSortBy:n,members:s}=e;return r.a.createElement("div",{className:"flex flex-wrap items-center gap-4 my-4"},r.a.createElement("select",{value:t.category,onChange:e=>a(t=>Object(m.a)(Object(m.a)({},t),{},{category:e.target.value})),className:"border p-2"},r.a.createElement("option",{value:""},"Alla kategorier"),r.a.createElement("option",{value:"ux"},"UX"),r.a.createElement("option",{value:"frontend"},"Frontend"),r.a.createElement("option",{value:"backend"},"Backend")),r.a.createElement("select",{value:t.member,onChange:e=>a(t=>Object(m.a)(Object(m.a)({},t),{},{member:e.target.value})),className:"border p-2"},r.a.createElement("option",{value:""},"Alla medlemmar"),s.map(e=>r.a.createElement("option",{key:e.id,value:e.name},e.name))),r.a.createElement("select",{value:l,onChange:e=>n(e.target.value),className:"border p-2"},r.a.createElement("option",{value:"timestamp-desc"},"Nyast f\xf6rst"),r.a.createElement("option",{value:"timestamp-asc"},"\xc4ldst f\xf6rst"),r.a.createElement("option",{value:"title-asc"},"A\u2013\xd6"),r.a.createElement("option",{value:"title-desc"},"\xd6\u2013A")))};var f=e=>{let{onAddMember:t,user:a,members:n=[]}=e;const[s,m]=Object(l.useState)(""),[c,o]=Object(l.useState)("ux");Object(l.useEffect)(()=>{a&&(m(a.name),o(a.role||"ux"))},[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:e=>{e.preventDefault(),""!==s.trim()&&(t(s,c),a||m(""))},className:"p-4 border rounded mb-6"},!a&&r.a.createElement("input",{type:"text",value:s,onChange:e=>m(e.target.value),placeholder:"Namn",className:"border p-2 w-full mb-2"}),a&&r.a.createElement("p",{className:"mb-2"},r.a.createElement("strong",null,a.name)," (inloggad som ",r.a.createElement("em",null,a.role),")")),r.a.createElement("div",{className:"bg-white p-4 rounded shadow max-w-md mx-auto"},r.a.createElement("h2",{className:"text-xl font-bold mb-3"},"Alla medlemmar"),0===n.length?r.a.createElement("p",{className:"text-gray-500"}):r.a.createElement("ul",{className:"space-y-2 max-h-48 overflow-y-auto"},n.map(e=>r.a.createElement("li",{key:e.id,className:"border-b pb-1"},r.a.createElement("p",null,r.a.createElement("strong",null,e.name)," (",e.category,")"))))))};a(29);var y=()=>{const[e,t]=Object(l.useState)([]),[a,n]=Object(l.useState)([]),[s,i]=Object(l.useState)({category:"",member:""}),[u,p]=Object(l.useState)("timestamp-desc"),[y,x]=Object(l.useState)(""),[w,j]=Object(l.useState)(""),[N,h]=Object(l.useState)(null),[O,k]=Object(l.useState)(!1),[S,C]=Object(l.useState)("ux");Object(l.useEffect)(()=>{const e=Object(o.h)(Object(o.b)(g,"assignments"),e=>{const a=e.docs.map(e=>Object(m.a)({id:e.id},e.data()));t(a)});return()=>e()},[]),Object(l.useEffect)(()=>{(async()=>{const e=(await Object(o.f)(Object(o.b)(g,"members"))).docs.map(e=>Object(m.a)({id:e.id},e.data()));n(e)})()},[]);const A=t=>e.filter(e=>(null===e||void 0===e?void 0:e.status)===t).filter(e=>(!s.category||(null===e||void 0===e?void 0:e.category)===s.category)&&(!s.member||(null===e||void 0===e?void 0:e.member)===s.member));return r.a.createElement("div",{className:"min-h-screen bg-gray-100 p-6 font-sans max-w-5xl mx-auto"},r.a.createElement("h1",{className:"text-4xl font-bold text-center mb-8 text-blue-600"},"Scrum Board"),!N&&r.a.createElement("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow"},r.a.createElement("h2",{className:"text-2xl mb-4"},O?"Registrera":"Logga in"),r.a.createElement("form",{onSubmit:O?async e=>{if(e.preventDefault(),y&&w)try{const e=(await Object(d.a)(b,y,w)).user.uid;await Object(o.l)(Object(o.d)(g,"users",e),{uid:e,email:y,name:y,role:S}),h({uid:e,email:y,name:y,role:S}),alert("Registrering lyckades!"),x(""),j("")}catch(t){alert("Fel vid registrering: "+t.message)}else alert("Fyll i email och l\xf6senord")}:async e=>{if(e.preventDefault(),y&&w)try{const e=(await Object(d.c)(b,y,w)).user.uid,a=await Object(o.e)(Object(o.d)(g,"users",e));a.exists()?(h(Object(m.a)({uid:e},a.data())),alert("V\xe4lkommen tillbaka, ".concat(a.data().name||y,"!"))):alert("Anv\xe4ndardata kunde inte hittas."),x(""),j("")}catch(t){alert("Fel vid inloggning: "+t.message)}else alert("Fyll i email och l\xf6senord")}},r.a.createElement("input",{type:"email",placeholder:"Email",className:"border p-2 w-full mb-3",value:y,onChange:e=>x(e.target.value),required:!0}),r.a.createElement("input",{type:"password",placeholder:"L\xf6senord",className:"border p-2 w-full mb-3",value:w,onChange:e=>j(e.target.value),required:!0}),O&&r.a.createElement("select",{value:S,onChange:e=>C(e.target.value),className:"border p-2 w-full mb-3"},r.a.createElement("option",{value:"ux"},"UX"),r.a.createElement("option",{value:"frontend"},"Frontend"),r.a.createElement("option",{value:"backend"},"Backend")),r.a.createElement("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded w-full"},O?"Registrera":"Logga in")),r.a.createElement("button",{onClick:()=>k(!O),className:"mt-4 text-blue-600 underline"},O?"Har redan konto? Logga in":"Har inte konto? Registrera")),N&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex justify-between items-center mb-6"},r.a.createElement("p",null,"Inloggad som ",r.a.createElement("strong",null,N.email)," (",N.role,")"),r.a.createElement("button",{onClick:async()=>{await Object(d.d)(b),h(null),n([])},className:"bg-red-500 text-white px-3 py-1 rounded"},"Logga ut")),r.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},r.a.createElement("div",{className:"bg-white rounded-xl shadow-md p-4"},r.a.createElement(c,{onAddAssignment:async(e,t)=>{await Object(o.a)(Object(o.b)(g,"assignments"),{title:e,category:t,status:"new",member:"",timestamp:Object(o.k)()})}}),r.a.createElement(f,{onAddMember:async(e,t)=>{const a={name:e,category:t};try{await Object(o.a)(Object(o.b)(g,"members"),a)}catch(l){alert("Kunde inte l\xe4gga till medlem: "+l.message)}},user:N})),r.a.createElement("div",{className:"text-center mb-6 md:col-span-2 bg-white rounded-xl shadow-md p-4"},r.a.createElement(v,{filters:s,setFilters:i,sortBy:u,setSortBy:p,members:a}))),r.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},["new","in progress","finished"].map(e=>r.a.createElement("div",{key:e},r.a.createElement("h2",{className:"text-xl font-bold mb-2 ".concat("new"===e?"text-red-500":"in progress"===e?"text-yellow-500":"text-green-600")},"new"===e&&"\ud83c\udd95 Ny","in progress"===e&&"\ud83d\udea7 P\xe5g\xe5r","finished"===e&&"\u2705 Klar"),r.a.createElement(E,{assignments:A(e),filters:s,sortBy:u,members:a,user:N}))))))};s.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)))}},[[16,1,2]]]);
//# sourceMappingURL=main.bbe805d8.chunk.js.map